# confidence_policy.yaml

default:
  min_confidence: 0.5
  fallback_message: "Low confidence. Admin review required."
  caution_header: true

routes:
  /tasks/submit:
    min_confidence: 0.6
    fallback_message: "Task review required"
  
  /admin/reviews:
    min_confidence: 0.3
    caution_header: false

  /wallet/summary:
    min_confidence: 0.4
    fallback_message: "Sensitive request. Check required."

routing:
  min_confidence_for_normal: 0.80   # >= အခုဆိုရင် normal path
  min_confidence_for_review: 0.50   # < 0.80 && > 0.50 => fallback/admin review (202)
  min_confidence_for_reject: 0.00   # demo မှာ မသုံးသေး

toxicity:
  threshold: 0.50                   # > 0.50 ဖြစ်ရင် fallback/admin review

response:
  attach_signals: true              # JSON response ထဲမှာ ai.signals ထည့်မလား

latency:
  warn_ms: 800     # add 'x-ai-latency-warn' header & stats
  trip_ms: 2000    # degrade to fallback/admin (202) when p95 exceeds this
  window: 50       # rolling sample size
  max_error_rate: 0.20

# confidence_policy.yaml
attach_explain: true        # <- Toggle: true = auto-add "explain" to JSON responses
min_confidence: 0.50
max_toxicity: 0.70

latency:
  warn_ms: 300
  trip_ms: 500
