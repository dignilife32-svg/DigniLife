<!doctype html><html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DigniLife Withdraw Demo</title>
<script src="https://cdn.tailwindcss.com"></script>
</head><body class="min-h-screen bg-gray-50">
<div class="max-w-md mx-auto p-6 space-y-3">
  <h1 class="text-2xl font-bold">Withdraw Demo</h1>
  <label class="block"><span class="text-sm text-gray-600">Amount (USD)</span>
    <input id="amt" class="mt-1 w-full border rounded px-3 py-2" value="5.00"/></label>
  <button id="btn" class="px-4 py-2 rounded bg-emerald-600 text-white">Withdraw</button>
  <pre id="out" class="text-xs bg-white border rounded p-3"></pre>
  <p class="text-sm text-gray-600">⚠️ First run Face Verify to get a fresh token.</p>
</div>
<script>
const $=id=>document.getElementById(id); const out=$("out");
async function go(){
  const token = sessionStorage.getItem("dl_face_token");
  const user_id = sessionStorage.getItem("dl_user_id");
  const device_id = sessionStorage.getItem("dl_device_id") || localStorage.getItem("dl_device_id");
  if(!token||!user_id||!device_id){ out.textContent="No token/user/device. Run /ui/face-verify first."; return; }
  const amount = parseFloat($("amt").value||"0");
  const res = await fetch("/wallet/withdraw", {
    method:"POST",
    headers:{"Content-Type":"application/json","X-Face-Token":token},
    body: JSON.stringify({user_id, device_id, amount})
  });
  out.textContent = (res.status+" "+res.statusText)+"\n"+JSON.stringify(await res.json(),null,2);
}
$("btn").onclick=go;
</script>
</body></html>
